# Go-Zero å¾®æœåŠ¡è¯¦ç»†ç›®å½•ç»“æ„

## ğŸ—ï¸ æ€»ä½“ç»“æ„è®¾è®¡

```
services/
â”œâ”€â”€ gateway/                          # APIç½‘å…³æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â””â”€â”€ main.go                   # ç½‘å…³å…¥å£
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/                   # é…ç½®å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ handler/                  # HTTPå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ logic/                    # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ middleware/               # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ svc/                      # æœåŠ¡ä¾èµ–
â”‚   â”œâ”€â”€ etc/
â”‚   â”‚   â””â”€â”€ gateway.yaml              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ gateway.api                   # APIå®šä¹‰
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ dictionary/                       # è¯å…¸æ ¸å¿ƒæœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”œâ”€â”€ model/                    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/                          # gRPCæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ pb/                       # protobufç”Ÿæˆæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â””â”€â”€ dictionary.proto
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ dictionary.api
â”œâ”€â”€ ai-translation/                   # AIç¿»è¯‘æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ openai/              # OpenAIé€‚é…å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ claude/              # Claudeé€‚é…å™¨
â”‚   â”‚   â”‚   â””â”€â”€ translator/          # ç¿»è¯‘æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ translation.api
â”œâ”€â”€ ai-writing/                       # AIå†™ä½œè¾…åŠ©æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ grammar/             # è¯­æ³•æ£€æŸ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ expansion/           # å†…å®¹æ‰©å†™
â”‚   â”‚   â”‚   â””â”€â”€ style/               # é£æ ¼åˆ†æ
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ writing.api
â”œâ”€â”€ user/                             # ç”¨æˆ·ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                # è®¤è¯é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/             # ç”¨æˆ·èµ„æ–™
â”‚   â”‚   â”‚   â””â”€â”€ preference/          # åå¥½è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ user.api
â”œâ”€â”€ learning/                         # å­¦ä¹ ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ vocabulary/          # ç”Ÿè¯æœ¬ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ progress/            # å­¦ä¹ è¿›åº¦
â”‚   â”‚   â”‚   â”œâ”€â”€ review/              # å¤ä¹ ç®—æ³•
â”‚   â”‚   â”‚   â””â”€â”€ analytics/           # å­¦ä¹ åˆ†æ
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ learning.api
â”œâ”€â”€ media/                            # å¤šåª’ä½“æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ audio/               # éŸ³é¢‘ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ pronunciation/       # å‘éŸ³æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ cdn/                 # CDNç®¡ç†
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ media.api
â”œâ”€â”€ ocr/                              # OCRè¯†åˆ«æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ preprocess/          # å›¾ç‰‡é¢„å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ recognition/         # æ–‡å­—è¯†åˆ«
â”‚   â”‚   â”‚   â””â”€â”€ postprocess/         # ç»“æœåå¤„ç†
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ ocr.api
â”œâ”€â”€ tts/                              # TTSè¯­éŸ³åˆæˆæœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ synthesis/           # è¯­éŸ³åˆæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ voice/               # éŸ³æºç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ streaming/           # æµåª’ä½“
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ tts.api
â”œâ”€â”€ speech/                           # è¯­éŸ³è¯„æµ‹æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ evaluation/          # å‘éŸ³è¯„æµ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ scoring/             # è¯„åˆ†ç®—æ³•
â”‚   â”‚   â”‚   â””â”€â”€ feedback/            # åé¦ˆå»ºè®®
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ speech.api
â”œâ”€â”€ document/                         # æ–‡æ¡£ç¿»è¯‘æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â”œâ”€â”€ parser/              # æ–‡æ¡£è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ translator/          # ç¿»è¯‘å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ formatter/           # æ ¼å¼ä¿æŒ
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ svc/
â”‚   â”œâ”€â”€ rpc/
â”‚   â”œâ”€â”€ etc/
â”‚   â””â”€â”€ document.api
â””â”€â”€ sync/                             # æ•°æ®åŒæ­¥æœåŠ¡
    â”œâ”€â”€ cmd/
    â”œâ”€â”€ internal/
    â”‚   â”œâ”€â”€ config/
    â”‚   â”œâ”€â”€ handler/
    â”‚   â”œâ”€â”€ logic/
    â”‚   â”‚   â”œâ”€â”€ conflict/            # å†²çªè§£å†³
    â”‚   â”‚   â”œâ”€â”€ incremental/         # å¢é‡åŒæ­¥
    â”‚   â”‚   â””â”€â”€ offline/             # ç¦»çº¿ç¼“å­˜
    â”‚   â”œâ”€â”€ model/
    â”‚   â””â”€â”€ svc/
    â”œâ”€â”€ rpc/
    â”œâ”€â”€ etc/
    â””â”€â”€ sync.api
```

## ğŸ“‹ å„æœåŠ¡æ ‡å‡†ç›®å½•ç»“æ„è¯´æ˜

æ¯ä¸ªå¾®æœåŠ¡éƒ½éµå¾ªgo-zeroçš„æ ‡å‡†ç›®å½•ç»“æ„ï¼š

### æ ¸å¿ƒç›®å½•
- **cmd/**: æœåŠ¡å¯åŠ¨å…¥å£
- **internal/**: ç§æœ‰ä»£ç ï¼Œä¸å¯¹å¤–æš´éœ²
  - **config/**: é…ç½®ç»“æ„å®šä¹‰
  - **handler/**: HTTPè¯·æ±‚å¤„ç†å™¨
  - **logic/**: ä¸šåŠ¡é€»è¾‘å®ç°
  - **model/**: æ•°æ®æ¨¡å‹å’Œæ•°æ®åº“æ“ä½œ
  - **svc/**: æœåŠ¡ä¾èµ–ç®¡ç†
- **rpc/**: gRPCç›¸å…³ä»£ç 
  - **pb/**: protobufç”Ÿæˆçš„Goä»£ç 
  - **internal/**: gRPCå†…éƒ¨é€»è¾‘
- **etc/**: é…ç½®æ–‡ä»¶
- **Dockerfile**: å®¹å™¨åŒ–é…ç½®

### APIå®šä¹‰æ–‡ä»¶
- **service.api**: HTTP APIå®šä¹‰
- **service.proto**: gRPCæ¥å£å®šä¹‰

## ğŸ”§ æœåŠ¡é—´é€šä¿¡è®¾è®¡

### gRPCé€šä¿¡
æœåŠ¡é—´é€šè¿‡gRPCè¿›è¡Œå†…éƒ¨é€šä¿¡ï¼Œæé«˜æ€§èƒ½å’Œç±»å‹å®‰å…¨æ€§ï¼š

```protobuf
// dictionary.proto ç¤ºä¾‹
service DictionaryService {
  rpc QueryWord(WordRequest) returns (WordResponse);
  rpc SearchWords(SearchRequest) returns (SearchResponse);
  rpc GetWordDetails(DetailRequest) returns (DetailResponse);
}
```

### æ¶ˆæ¯é˜Ÿåˆ—
å¼‚æ­¥å¤„ç†ä½¿ç”¨Kafkaï¼š
- å­¦ä¹ æ•°æ®ç»Ÿè®¡
- æ—¥å¿—æ”¶é›†
- æ•°æ®åŒæ­¥é€šçŸ¥

### ç¼“å­˜ç­–ç•¥
Redisç¼“å­˜è®¾è®¡ï¼š
- çƒ­ç‚¹è¯æ±‡ç¼“å­˜
- ç”¨æˆ·ä¼šè¯ç¼“å­˜
- ç¿»è¯‘ç»“æœç¼“å­˜
- åª’ä½“èµ„æºç¼“å­˜

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### PostgreSQLä¸»åº“
- ç”¨æˆ·æ•°æ®
- è¯å…¸æ•°æ®
- å­¦ä¹ è®°å½•
- ç³»ç»Ÿé…ç½®

### Elasticsearchæœç´¢
- å…¨æ–‡ç´¢å¼•
- æ¨¡ç³Šæœç´¢
- ç›¸å…³æ€§æ’åº

### Redisç¼“å­˜
- çƒ­ç‚¹æ•°æ®
- ä¼šè¯å­˜å‚¨
- è®¡æ•°å™¨
- åˆ†å¸ƒå¼é”

## ğŸš€ éƒ¨ç½²é…ç½®

æ¯ä¸ªæœåŠ¡éƒ½åŒ…å«ï¼š
- **Dockerfile**: å®¹å™¨é•œåƒæ„å»º
- **k8s/*.yaml**: Kuberneteséƒ¨ç½²é…ç½®
- **helm/**: Helm Chartæ¨¡æ¿
- **docker-compose.yml**: æœ¬åœ°å¼€å‘ç¯å¢ƒ

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### ç›‘æ§æŒ‡æ ‡
- APIå“åº”æ—¶é—´
- é”™è¯¯ç‡ç»Ÿè®¡
- èµ„æºä½¿ç”¨æƒ…å†µ
- ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§

### æ—¥å¿—ç³»ç»Ÿ
- ç»“æ„åŒ–æ—¥å¿—
- é“¾è·¯è¿½è¸ª
- é”™è¯¯æŠ¥è­¦
- æ€§èƒ½åˆ†æ

è¿™ä¸ªè®¾è®¡ç¡®ä¿äº†å¾®æœåŠ¡çš„ç‹¬ç«‹æ€§ã€å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œä¸ºæ¬§è·¯è¯å…¸åŠŸèƒ½çš„å®Œæ•´å®ç°æä¾›äº†åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚